
<!DOCTYPE html>
<html>
<head>
    <script defer data-domain="pauldimonte.github.io/mm-sitiosafectados" src="https://plausible.io/js/script.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="refresh" content="90">
    <title>Mapa de Sitios Afectados</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        #barra-info {
            background: #f0f0f0;
            padding: 10px;
            font-size: 14px;
        }
        #filtros {
            margin-top: 5px;
        }
        #map { height: 90vh; width: 100%; }
        .checkbox-categoria {
            margin-right: 10px;
        }
        .icono-parpadeo img {
            animation: parpadeo 1s infinite;
        }
        @keyframes parpadeo {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.2; }
        }
    </style>
</head>
<body>
<div id="barra-info">
    ðŸ”´ Total de sitios afectados: <span id="contador">37</span> |
    ðŸ•’ Ãšltima actualizaciÃ³n: 2025-05-21 20:23:09
    <div id="filtros">
        Filtrar por tipo:
<label class="checkbox-categoria"><input type="checkbox" class="filtro-alerta" value="CORTEFO" checked> CORTEFO</label><label class="checkbox-categoria"><input type="checkbox" class="filtro-alerta" value="ENVIRONMENT" checked> ENVIRONMENT</label><label class="checkbox-categoria"><input type="checkbox" class="filtro-alerta" value="HARDWARE" checked> HARDWARE</label><label class="checkbox-categoria"><input type="checkbox" class="filtro-alerta" value="OTHERREASON" checked> OTHERREASON</label>
    </div>
</div>

<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
// Leer zoom y centro guardados
    const savedCenter = localStorage.getItem('mapCenter');
    const savedZoom = localStorage.getItem('mapZoom');

    // Crear mapa con valores guardados o por defecto
    var map = L.map('map').setView(
        savedCenter ? JSON.parse(savedCenter) : [-34.5, -58.5],
        savedZoom ? parseInt(savedZoom) : 6
    );

    // Guardar el estado al mover o hacer zoom
    map.on('moveend zoomend', function () {
        localStorage.setItem('mapCenter', JSON.stringify(map.getCenter()));
        localStorage.setItem('mapZoom', map.getZoom());
    });

    // AÃ±adir tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    var marcadores = [];

    // FunciÃ³n para escalar Ã­conos segÃºn zoom
    function ajustarEscalaIconos() {
        const zoom = map.getZoom();
        let scale = 1;
        if (zoom < 7) scale = 0.5;
        else if (zoom < 9) scale = 0.6;
        else if (zoom < 11) scale = 0.7;
        else if (zoom < 15) scale = 0.8;
        else scale = 1;

        document.querySelectorAll('.leaflet-marker-icon img').forEach(icon => {
            icon.style.transform = `scale(${scale})`;
            icon.style.transformOrigin = "center center";
        });
    }
        map.on('zoomend', ajustarEscalaIconos);
    window.addEventListener('load', ajustarEscalaIconos);

    var icon_A25_Z021 = L.divIcon({
        className: 'icono-parpadeo',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A25_Z021 = L.marker([-50.46843515918, -73.02851816721], {
        icon: icon_A25_Z021,
        title: "A25-Z021 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A25-Z021 - OTHERREASON");
    marker_A25_Z021.addTo(map);
    marcadores.push(marker_A25_Z021);

    var icon_OPU941 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_OPU941 = L.marker([-34.59272782445, -58.52641226325], {
        icon: icon_OPU941,
        title: "OPU941 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("OPU941 - OTHERREASON");
    marker_OPU941.addTo(map);
    marcadores.push(marker_OPU941);

    var icon_A11_E027 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/12436/12436490.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A11_E027 = L.marker([-27.73563127874, -64.26862902085], {
        icon: icon_A11_E027,
        title: "A11-E027 - HARDWARE",
        categoria: "HARDWARE"
    }).bindTooltip("A11-E027 - HARDWARE");
    marker_A11_E027.addTo(map);
    marcadores.push(marker_A11_E027);

    var icon_A42_B485 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A42_B485 = L.marker([-35.00188595038, -58.37690505486], {
        icon: icon_A42_B485,
        title: "A42-B485 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("A42-B485 - ENVIRONMENT");
    marker_A42_B485.addTo(map);
    marcadores.push(marker_A42_B485);

    var icon_A29_R242 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A29_R242 = L.marker([-40.70845922893, -64.49114899356], {
        icon: icon_A29_R242,
        title: "A29-R242 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("A29-R242 - ENVIRONMENT");
    marker_A29_R242.addTo(map);
    marcadores.push(marker_A29_R242);

    var icon_A18_S249 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A18_S249 = L.marker([-27.41532292627, -55.93582890206], {
        icon: icon_A18_S249,
        title: "A18-S249 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A18-S249 - OTHERREASON");
    marker_A18_S249.addTo(map);
    marcadores.push(marker_A18_S249);

    var icon_NPU133 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_NPU133 = L.marker([-34.44063198927, -58.76960112558], {
        icon: icon_NPU133,
        title: "NPU133 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("NPU133 - ENVIRONMENT");
    marker_NPU133.addTo(map);
    marcadores.push(marker_NPU133);

    var icon_A29_R241 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A29_R241 = L.marker([-41.7079766421, -65.3148832621], {
        icon: icon_A29_R241,
        title: "A29-R241 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A29-R241 - OTHERREASON");
    marker_A29_R241.addTo(map);
    marcadores.push(marker_A29_R241);

    var icon_A29_R240 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A29_R240 = L.marker([-40.71226517232, -63.66614212959], {
        icon: icon_A29_R240,
        title: "A29-R240 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A29-R240 - OTHERREASON");
    marker_A29_R240.addTo(map);
    marcadores.push(marker_A29_R240);

    var icon_A19_S079 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A19_S079 = L.marker([-26.7237232546, -54.71911815387], {
        icon: icon_A19_S079,
        title: "A19-S079 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A19-S079 - OTHERREASON");
    marker_A19_S079.addTo(map);
    marcadores.push(marker_A19_S079);

    var icon_SPU2229 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU2229 = L.marker([-34.94846830096, -57.96058939361], {
        icon: icon_SPU2229,
        title: "SPU2229 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("SPU2229 - ENVIRONMENT");
    marker_SPU2229.addTo(map);
    marcadores.push(marker_SPU2229);

    var icon_CI_080 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CI_080 = L.marker([-34.57786963786, -58.42642981102], {
        icon: icon_CI_080,
        title: "CI_080 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("CI_080 - OTHERREASON");
    marker_CI_080.addTo(map);
    marcadores.push(marker_CI_080);

    var icon_SPU572 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU572 = L.marker([-34.86662722347, -58.50293219453], {
        icon: icon_SPU572,
        title: "SPU572 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("SPU572 - ENVIRONMENT");
    marker_SPU572.addTo(map);
    marcadores.push(marker_SPU572);

    var icon_SPU694 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU694 = L.marker([-34.72120979667, -58.44529849926], {
        icon: icon_SPU694,
        title: "SPU694 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("SPU694 - ENVIRONMENT");
    marker_SPU694.addTo(map);
    marcadores.push(marker_SPU694);

    var icon_CI_569 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CI_569 = L.marker([-34.5885345058, -58.41045175035], {
        icon: icon_CI_569,
        title: "CI_569 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("CI_569 - OTHERREASON");
    marker_CI_569.addTo(map);
    marcadores.push(marker_CI_569);

    var icon_A18_S103 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/12436/12436490.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A18_S103 = L.marker([-27.44805800168, -55.57481096621], {
        icon: icon_A18_S103,
        title: "A18-S103 - HARDWARE",
        categoria: "HARDWARE"
    }).bindTooltip("A18-S103 - HARDWARE");
    marker_A18_S103.addTo(map);
    marcadores.push(marker_A18_S103);

    var icon_CPU506 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CPU506 = L.marker([-34.67425526913, -58.46809410985], {
        icon: icon_CPU506,
        title: "CPU506 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("CPU506 - ENVIRONMENT");
    marker_CPU506.addTo(map);
    marcadores.push(marker_CPU506);

    var icon_SPU2236 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/12436/12436490.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU2236 = L.marker([-34.70105696239, -58.43396753933], {
        icon: icon_SPU2236,
        title: "SPU2236 - HARDWARE",
        categoria: "HARDWARE"
    }).bindTooltip("SPU2236 - HARDWARE");
    marker_SPU2236.addTo(map);
    marcadores.push(marker_SPU2236);

    var icon_CEM090 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CEM090 = L.marker([-34.63947346284, -58.52890855307], {
        icon: icon_CEM090,
        title: "CEM090 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("CEM090 - OTHERREASON");
    marker_CEM090.addTo(map);
    marcadores.push(marker_CEM090);

    var icon_CPU041 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/3914/3914779.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CPU041 = L.marker([-34.61369062933, -58.39036449721], {
        icon: icon_CPU041,
        title: "CPU041 - CORTEFO",
        categoria: "CORTEFO"
    }).bindTooltip("CPU041 - CORTEFO");
    marker_CPU041.addTo(map);
    marcadores.push(marker_CPU041);

    var icon_CPU682 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CPU682 = L.marker([-34.67370179924, -58.43543713405], {
        icon: icon_CPU682,
        title: "CPU682 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("CPU682 - ENVIRONMENT");
    marker_CPU682.addTo(map);
    marcadores.push(marker_CPU682);

    var icon_A17_S360 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/12436/12436490.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A17_S360 = L.marker([-27.47713738789, -58.85527483364], {
        icon: icon_A17_S360,
        title: "A17-S360 - HARDWARE",
        categoria: "HARDWARE"
    }).bindTooltip("A17-S360 - HARDWARE");
    marker_A17_S360.addTo(map);
    marcadores.push(marker_A17_S360);

    var icon_SPU115 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU115 = L.marker([-34.70740877143, -58.40123196811], {
        icon: icon_SPU115,
        title: "SPU115 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("SPU115 - ENVIRONMENT");
    marker_SPU115.addTo(map);
    marcadores.push(marker_SPU115);

    var icon_A43_B900 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A43_B900 = L.marker([-34.06904214431, -60.11652439072], {
        icon: icon_A43_B900,
        title: "A43-B900 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("A43-B900 - ENVIRONMENT");
    marker_A43_B900.addTo(map);
    marcadores.push(marker_A43_B900);

    var icon_NPU077 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_NPU077 = L.marker([-34.31392300206, -58.59675999886], {
        icon: icon_NPU077,
        title: "NPU077 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("NPU077 - OTHERREASON");
    marker_NPU077.addTo(map);
    marcadores.push(marker_NPU077);

    var icon_CEM042 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/12436/12436490.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CEM042 = L.marker([-34.59068669755, -58.37356755991], {
        icon: icon_CEM042,
        title: "CEM042 - HARDWARE",
        categoria: "HARDWARE"
    }).bindTooltip("CEM042 - HARDWARE");
    marker_CEM042.addTo(map);
    marcadores.push(marker_CEM042);

    var icon_SPU1109 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU1109 = L.marker([-34.66922491302, -58.3387018168], {
        icon: icon_SPU1109,
        title: "SPU1109 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("SPU1109 - OTHERREASON");
    marker_SPU1109.addTo(map);
    marcadores.push(marker_SPU1109);

    var icon_A43_B161 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A43_B161 = L.marker([-34.36662400209, -59.12845899881], {
        icon: icon_A43_B161,
        title: "A43-B161 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A43-B161 - OTHERREASON");
    marker_A43_B161.addTo(map);
    marcadores.push(marker_A43_B161);

    var icon_A43_B740 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A43_B740 = L.marker([-34.12036681911, -59.44057475232], {
        icon: icon_A43_B740,
        title: "A43-B740 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("A43-B740 - ENVIRONMENT");
    marker_A43_B740.addTo(map);
    marcadores.push(marker_A43_B740);

    var icon_A43_B005 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/10742/10742093.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A43_B005 = L.marker([-34.29997700218, -60.26752699864], {
        icon: icon_A43_B005,
        title: "A43-B005 - ENVIRONMENT",
        categoria: "ENVIRONMENT"
    }).bindTooltip("A43-B005 - ENVIRONMENT");
    marker_A43_B005.addTo(map);
    marcadores.push(marker_A43_B005);

    var icon_A26_U119 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_A26_U119 = L.marker([-45.31319068573, -67.33553368752], {
        icon: icon_A26_U119,
        title: "A26-U119 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("A26-U119 - OTHERREASON");
    marker_A26_U119.addTo(map);
    marcadores.push(marker_A26_U119);

    var icon_SPU1334 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU1334 = L.marker([-34.76480600652, -58.37234831653], {
        icon: icon_SPU1334,
        title: "SPU1334 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("SPU1334 - OTHERREASON");
    marker_SPU1334.addTo(map);
    marcadores.push(marker_SPU1334);

    var icon_OPU1069 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_OPU1069 = L.marker([-34.79876643285, -58.63775947937], {
        icon: icon_OPU1069,
        title: "OPU1069 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("OPU1069 - OTHERREASON");
    marker_OPU1069.addTo(map);
    marcadores.push(marker_OPU1069);

    var icon_OPU852 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_OPU852 = L.marker([-34.73069967455, -58.65143167109], {
        icon: icon_OPU852,
        title: "OPU852 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("OPU852 - OTHERREASON");
    marker_OPU852.addTo(map);
    marcadores.push(marker_OPU852);

    var icon_SPU529 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_SPU529 = L.marker([-34.85997972016, -58.40089496025], {
        icon: icon_SPU529,
        title: "SPU529 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("SPU529 - OTHERREASON");
    marker_SPU529.addTo(map);
    marcadores.push(marker_SPU529);

    var icon_CEM021 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_CEM021 = L.marker([-34.58879470748, -58.37262917968], {
        icon: icon_CEM021,
        title: "CEM021 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("CEM021 - OTHERREASON");
    marker_CEM021.addTo(map);
    marcadores.push(marker_CEM021);

    var icon_OPU243 = L.divIcon({
        className: '',
        html: '<img src="https://cdn-icons-png.flaticon.com/512/8034/8034100.png" style="width:30px;height:30px;">',
        iconSize: [30, 30]
    });
    var marker_OPU243 = L.marker([-34.78387646306, -58.62022060103], {
        icon: icon_OPU243,
        title: "OPU243 - OTHERREASON",
        categoria: "OTHERREASON"
    }).bindTooltip("OPU243 - OTHERREASON");
    marker_OPU243.addTo(map);
    marcadores.push(marker_OPU243);

    document.querySelectorAll('.filtro-alerta').forEach(function(checkbox) {
        checkbox.addEventListener('change', function() {
            var seleccionadas = Array.from(document.querySelectorAll('.filtro-alerta:checked')).map(cb => cb.value);
            var contador = 0;
            marcadores.forEach(function(m) {
                var cat = m.options.categoria;
                if (seleccionadas.includes(cat)) {
                    map.addLayer(m);
                    contador += 1;
                } else {
                    map.removeLayer(m);
                }
            });
            document.getElementById("contador").textContent = contador;
        });
    });
</script>
</body>
</html>
